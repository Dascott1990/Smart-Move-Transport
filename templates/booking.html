{% extends "base.html" %}

{% block title %}Book Your Service - Capitol City Contracting{% endblock %}

{% block extra_css %}
<style>
.booking-container {
    max-width: 800px;
}
</style>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/booking.js') }}"></script>
{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="bg-light py-5" style="margin-top: 76px;">
    <div class="container py-4">
        <div class="text-center">
            <div class="d-flex justify-content-center align-items-center mb-4">
                <img src="{{ url_for('static', filename='images/logo.png') }}" 
                     alt="Capitol City Contracting" 
                     height="80"
                     class="me-3">
                <div class="text-start">
                    <h1 class="display-4 fw-bold text-primary mb-0">Book Your Service</h1>
                    <p class="lead text-muted mb-0">Capitol City Contracting</p>
                </div>
            </div>
            <p class="lead text-muted">Fill out the form below and we'll contact you within 24 hours to confirm details</p>
        </div>
    </div>
</section>

<!-- Booking Form -->
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4">
                        <form id="bookingForm" class="booking-form">
                            <!-- Personal Information -->
                            <div class="mb-5">
                                <h3 class="text-primary mb-4">Personal Information</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="name" class="form-label">Full Name *</label>
                                        <input type="text" class="form-control" id="name" name="name" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email Address *</label>
                                        <input type="email" class="form-control" id="email" name="email" required>
                                    </div>
                                    <div class="col-12">
                                        <label for="phone" class="form-label">Phone Number *</label>
                                        <input type="tel" class="form-control" id="phone" name="phone" required>
                                    </div>
                                </div>
                            </div>

                            <!-- Service Details -->
                            <div class="mb-5">
                                <h3 class="text-primary mb-4">Service Details</h3>
                                <div class="row g-3">
                                    <div class="col-12">
                                        <label for="service" class="form-label">Select Service *</label>
                                        <select class="form-select" id="service" name="service_id" required>
                                            <option value="">Choose a service...</option>
                                            {% for service in services %}
                                            <option value="{{ service.id }}">{{ service.name }} - {{ service.price_range }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <label for="description" class="form-label">Project Description *</label>
                                        <textarea class="form-control" id="description" name="description" rows="4" placeholder="Please describe your project in detail..." required></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Schedule & Location -->
                            <div class="mb-4">
                                <h3 class="text-primary mb-4">Schedule & Location</h3>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="date" class="form-label">Preferred Date *</label>
                                        <input type="date" class="form-control" id="date" name="date" min="{{ today }}" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="time" class="form-label">Preferred Time *</label>
                                        <select class="form-select" id="time" name="time" required>
                                            <option value="">Select time...</option>
                                            <option value="Morning (8AM-12PM)">Morning (8AM-12PM)</option>
                                            <option value="Afternoon (12PM-4PM)">Afternoon (12PM-4PM)</option>
                                            <option value="Evening (4PM-6PM)">Evening (4PM-6PM)</option>
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <label for="address" class="form-label">Project Address *</label>
                                        <textarea class="form-control" id="address" name="address" rows="3" placeholder="Enter the full address where work will be performed..." required></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Emergency Notice -->
                            <div class="alert alert-warning mb-4">
                                <div class="d-flex">
                                    <i class="bi bi-telephone-fill me-3 fs-4"></i>
                                    <div>
                                        <strong>Emergency Service?</strong> Call us directly at <a href="tel:6135550123" class="alert-link">(613) 555-0123</a> for immediate assistance.
                                    </div>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">
                                Submit Booking Request
                            </button>
                            
                            <div id="formMessage" class="mt-3"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Booking Benefits -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-primary mb-3">Why Book With Us?</h2>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 text-center">
                <div class="benefit-card">
                    <i class="bi bi-lightning-charge display-4 text-primary mb-3"></i>
                    <h5>Fast Response</h5>
                    <p class="text-muted">We contact you within 24 hours to confirm your booking and schedule</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="benefit-card">
                    <i class="bi bi-cash-coin display-4 text-success mb-3"></i>
                    <h5>No Obligation Quote</h5>
                    <p class="text-muted">Free detailed estimate with no commitment required</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="benefit-card">
                    <i class="bi bi-shield-check display-4 text-warning mb-3"></i>
                    <h5>Fully Insured</h5>
                    <p class="text-muted">All work is covered by comprehensive liability insurance</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="benefit-card">
                    <i class="bi bi-calendar-check display-4 text-info mb-3"></i>
                    <h5>Flexible Scheduling</h5>
                    <p class="text-muted">We work around your schedule to minimize disruption</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}